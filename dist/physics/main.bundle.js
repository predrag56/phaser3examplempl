/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"main": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "static/physics";
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push([0,"vendors"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/client/components/animations.ts":
/*!*********************************************!*\
  !*** ./src/client/components/animations.ts ***!
  \*********************************************/
/*! exports provided: createDudeAnimations, setDudeAnimation, createMummyAnimation, setMummyAnimation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createDudeAnimations\", function() { return createDudeAnimations; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setDudeAnimation\", function() { return setDudeAnimation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createMummyAnimation\", function() { return createMummyAnimation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setMummyAnimation\", function() { return setMummyAnimation; });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../constants */ \"./src/constants.ts\");\n\r\nvar createDudeAnimations = function (scene) {\r\n    scene.anims.create({\r\n        key: 'left',\r\n        frames: scene.anims.generateFrameNumbers(_constants__WEBPACK_IMPORTED_MODULE_0__[\"SKINS\"].DUDE.toString(), { start: 0, end: 3 }),\r\n        frameRate: 10,\r\n        repeat: -1\r\n    });\r\n    scene.anims.create({\r\n        key: 'idle',\r\n        frames: [{ key: _constants__WEBPACK_IMPORTED_MODULE_0__[\"SKINS\"].DUDE.toString(), frame: 4 }],\r\n        frameRate: 20\r\n    });\r\n    scene.anims.create({\r\n        key: 'right',\r\n        frames: scene.anims.generateFrameNumbers(_constants__WEBPACK_IMPORTED_MODULE_0__[\"SKINS\"].DUDE.toString(), { start: 5, end: 8 }),\r\n        frameRate: 10,\r\n        repeat: -1\r\n    });\r\n};\r\nvar setDudeAnimation = function (sprite, animation) {\r\n    if (animation === void 0) { animation = 'idle'; }\r\n    if (!sprite.anims.isPlaying)\r\n        sprite.play(animation);\r\n    else if (sprite.anims.isPlaying && sprite.anims.getCurrentKey() !== animation)\r\n        sprite.play(animation);\r\n};\r\nvar createMummyAnimation = function (scene) {\r\n    scene.anims.create({\r\n        key: 'walk',\r\n        frames: scene.anims.generateFrameNumbers(_constants__WEBPACK_IMPORTED_MODULE_0__[\"SKINS\"].MUMMY.toString(), {}),\r\n        frameRate: 16,\r\n        repeat: 7\r\n    });\r\n};\r\nvar setMummyAnimation = function (sprite, direction) {\r\n    if (!sprite.anims.isPlaying)\r\n        sprite.anims.play('walk');\r\n    var flipX = direction === 'left' ? true : false;\r\n    sprite.setFlipX(flipX);\r\n};\r\n\n\n//# sourceURL=webpack:///./src/client/components/animations.ts?");

/***/ }),

/***/ "./src/client/components/controls.ts":
/*!*******************************************!*\
  !*** ./src/client/components/controls.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar Controls = /** @class */ (function () {\r\n    function Controls(scene, socket) {\r\n        var _this = this;\r\n        this.scene = scene;\r\n        this.socket = socket;\r\n        this.left = false;\r\n        this.right = false;\r\n        this.up = false;\r\n        this.controls = [];\r\n        this.none = true;\r\n        this.prevNone = true;\r\n        // add a second pointer\r\n        scene.input.addPointer();\r\n        var detectPointer = function (gameObject, down) {\r\n            if (gameObject.btn) {\r\n                switch (gameObject.btn) {\r\n                    case 'left':\r\n                        _this.left = down;\r\n                        break;\r\n                    case 'right':\r\n                        _this.right = down;\r\n                        break;\r\n                    case 'up':\r\n                        _this.up = down;\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        scene.input.on('gameobjectdown', function (pointer, gameObject) {\r\n            return detectPointer(gameObject, true);\r\n        });\r\n        scene.input.on('gameobjectup', function (pointer, gameObject) {\r\n            return detectPointer(gameObject, false);\r\n        });\r\n        var left = new Control(scene, 0, 0, 'left').setRotation(-0.5 * Math.PI);\r\n        var right = new Control(scene, 0, 0, 'right').setRotation(0.5 * Math.PI);\r\n        var up = new Control(scene, 0, 0, 'up');\r\n        this.controls.push(left, right, up);\r\n        this.resize();\r\n        this.scene.events.on('update', this.update, this);\r\n    }\r\n    Controls.prototype.controlsDown = function () {\r\n        return { left: this.left, right: this.right, up: this.up, none: this.none };\r\n    };\r\n    Controls.prototype.resize = function () {\r\n        var SCALE = 1;\r\n        var controlsRadius = (192 / 2) * SCALE;\r\n        var w = this.scene.cameras.main.width - 10 - controlsRadius;\r\n        var h = this.scene.cameras.main.height - 10 - controlsRadius;\r\n        var positions = [\r\n            {\r\n                x: controlsRadius + 10,\r\n                y: h\r\n            },\r\n            { x: controlsRadius + 214, y: h },\r\n            { x: w, y: h }\r\n        ];\r\n        this.controls.forEach(function (ctl, i) {\r\n            ctl.setPosition(positions[i].x, positions[i].y);\r\n            ctl.setScale(SCALE);\r\n        });\r\n    };\r\n    Controls.prototype.update = function () {\r\n        this.none = this.left || this.right || this.up ? false : true;\r\n        if (!this.none || this.none !== this.prevNone) {\r\n            var total = 0;\r\n            if (this.left)\r\n                total += 1;\r\n            if (this.right)\r\n                total += 2;\r\n            if (this.up)\r\n                total += 4;\r\n            if (this.none)\r\n                total += 8;\r\n            this.socket.emit('U' /* short for updateDude */, total);\r\n        }\r\n        this.prevNone = this.none;\r\n    };\r\n    return Controls;\r\n}());\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Controls);\r\nvar Control = /** @class */ (function (_super) {\r\n    __extends(Control, _super);\r\n    function Control(scene, x, y, btn) {\r\n        var _this = _super.call(this, scene, x, y, 'controls') || this;\r\n        _this.btn = btn;\r\n        scene.add.existing(_this);\r\n        _this.setInteractive()\r\n            .setScrollFactor(0)\r\n            .setAlpha(0.5)\r\n            .setDepth(2);\r\n        if (!scene.sys.game.device.input.touch)\r\n            _this.setAlpha(0);\r\n        return _this;\r\n    }\r\n    return Control;\r\n}(Phaser.GameObjects.Image));\r\n\n\n//# sourceURL=webpack:///./src/client/components/controls.ts?");

/***/ }),

/***/ "./src/client/components/cursors.ts":
/*!******************************************!*\
  !*** ./src/client/components/cursors.ts ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar Cursors = /** @class */ (function () {\r\n    function Cursors(scene, socket) {\r\n        this.scene = scene;\r\n        this.socket = socket;\r\n        this.none = true;\r\n        this.prevNone = true;\r\n        this.left = false;\r\n        this.right = false;\r\n        this.up = false;\r\n        this.cursors = scene.input.keyboard.createCursorKeys();\r\n        this.scene.events.on('update', this.update, this);\r\n    }\r\n    Cursors.prototype.cursorsDown = function () {\r\n        return { left: this.left, right: this.right, up: this.up, none: this.none };\r\n    };\r\n    Cursors.prototype.update = function () {\r\n        if (!this.cursors.left || !this.cursors.right || !this.cursors.up)\r\n            return;\r\n        this.none = this.cursors.left.isDown || this.cursors.right.isDown || this.cursors.up.isDown ? false : true;\r\n        if (!this.none || this.none !== this.prevNone) {\r\n            this.left = false;\r\n            this.right = false;\r\n            this.up = false;\r\n            if (this.cursors.left.isDown) {\r\n                this.left = true;\r\n            }\r\n            else if (this.cursors.right.isDown) {\r\n                this.right = true;\r\n            }\r\n            if (this.cursors.up.isDown) {\r\n                this.up = true;\r\n            }\r\n            if (false) { var total; }\r\n        }\r\n        this.prevNone = this.none;\r\n    };\r\n    return Cursors;\r\n}());\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Cursors);\r\n\n\n//# sourceURL=webpack:///./src/client/components/cursors.ts?");

/***/ }),

/***/ "./src/client/components/fullscreenButton.ts":
/*!***************************************************!*\
  !*** ./src/client/components/fullscreenButton.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar fullscreenButton = function (scene) {\r\n    var button = scene.add\r\n        .image(0, 0, 'fullscreen', 0)\r\n        .setOrigin(1, 0)\r\n        .setInteractive()\r\n        .setScrollFactor(0)\r\n        .setDepth(100);\r\n    button.on('pointerup', function () {\r\n        if (scene.scale.isFullscreen) {\r\n            button.setFrame(0);\r\n            scene.scale.stopFullscreen();\r\n        }\r\n        else {\r\n            button.setFrame(1);\r\n            scene.scale.startFullscreen();\r\n        }\r\n    });\r\n    return button;\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (fullscreenButton);\r\n\n\n//# sourceURL=webpack:///./src/client/components/fullscreenButton.ts?");

/***/ }),

/***/ "./src/client/components/resize.ts":
/*!*****************************************!*\
  !*** ./src/client/components/resize.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/**\r\n * This is a phaser 3 scaling strategy implementation from\r\n * https://github.com/yandeu/phaser3-scaling-resizing-example\r\n */\r\nvar DEFAULT_WIDTH = 896;\r\nvar DEFAULT_HEIGHT = 504;\r\nvar MAX_WIDTH = DEFAULT_WIDTH * 1.5;\r\nvar MAX_HEIGHT = DEFAULT_HEIGHT * 1.5;\r\nvar SCALE_MODE = 'SMOOTH'; // FIT OR SMOOTH\r\nvar resize = function (game) {\r\n    var w = window.innerWidth;\r\n    var h = window.innerHeight;\r\n    var width = DEFAULT_WIDTH;\r\n    var height = DEFAULT_HEIGHT;\r\n    var maxWidth = MAX_WIDTH;\r\n    var maxHeight = MAX_HEIGHT;\r\n    var scaleMode = SCALE_MODE;\r\n    var scale = Math.min(w / width, h / height);\r\n    var newWidth = Math.min(w / scale, maxWidth);\r\n    var newHeight = Math.min(h / scale, maxHeight);\r\n    var defaultRatio = DEFAULT_WIDTH / DEFAULT_HEIGHT;\r\n    var maxRatioWidth = MAX_WIDTH / DEFAULT_HEIGHT;\r\n    var maxRatioHeight = DEFAULT_WIDTH / MAX_HEIGHT;\r\n    // smooth scaling\r\n    var smooth = 1;\r\n    if (scaleMode === 'SMOOTH') {\r\n        var maxSmoothScale = 1.15;\r\n        var normalize = function (value, min, max) {\r\n            return (value - min) / (max - min);\r\n        };\r\n        if (width / height < w / h) {\r\n            smooth =\r\n                -normalize(newWidth / newHeight, defaultRatio, maxRatioWidth) / (1 / (maxSmoothScale - 1)) + maxSmoothScale;\r\n        }\r\n        else {\r\n            smooth =\r\n                -normalize(newWidth / newHeight, defaultRatio, maxRatioHeight) / (1 / (maxSmoothScale - 1)) + maxSmoothScale;\r\n        }\r\n    }\r\n    // resize the game\r\n    game.scale.resize(newWidth * smooth, newHeight * smooth);\r\n    // scale the width and height of the css\r\n    game.canvas.style.width = newWidth * scale + 'px';\r\n    game.canvas.style.height = newHeight * scale + 'px';\r\n    // center the game with css margin\r\n    game.canvas.style.marginTop = (h - newHeight * scale) / 2 + \"px\";\r\n    game.canvas.style.marginLeft = (w - newWidth * scale) / 2 + \"px\";\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (resize);\r\n\n\n//# sourceURL=webpack:///./src/client/components/resize.ts?");

/***/ }),

/***/ "./src/client/components/texts.ts":
/*!****************************************!*\
  !*** ./src/client/components/texts.ts ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../constants */ \"./src/constants.ts\");\n\r\nvar texts = [\r\n    {\r\n        y: 230,\r\n        fontSize: 28,\r\n        type: 'server_running_time'\r\n    },\r\n    {\r\n        y: 260,\r\n        fontSize: 28,\r\n        type: 'the_room_id'\r\n    },\r\n    {\r\n        y: 290,\r\n        fontSize: 28,\r\n        type: 'show_connected_users'\r\n    },\r\n    {\r\n        y: 320,\r\n        fontSize: 28,\r\n        type: 'show_latency'\r\n    },\r\n    {\r\n        y: 350,\r\n        fontSize: 28,\r\n        type: 'show_fps'\r\n    }\r\n];\r\nvar Texts = /** @class */ (function () {\r\n    function Texts(scene) {\r\n        var _this = this;\r\n        this.scene = scene;\r\n        this.textObjects = {};\r\n        this.hidden = false;\r\n        texts.forEach(function (text) {\r\n            var theText = scene.add\r\n                .text(scene.cameras.main.width / 2, text.y, '', {\r\n                color: '#ffffff',\r\n                fontSize: text.fontSize\r\n            })\r\n                .setOrigin(0.5)\r\n                .setResolution(window.devicePixelRatio)\r\n                .setScrollFactor(0)\r\n                .setDepth(100);\r\n            _this.textObjects[text.type] = theText;\r\n        });\r\n        this.makeBug();\r\n        this.resize();\r\n        this.toggleHidden();\r\n        this.scene.events.on('update', this.update, this);\r\n    }\r\n    Texts.prototype.update = function () {\r\n        if (this.hidden)\r\n            return;\r\n        this.setFps(this.scene.game.loop.actualFps);\r\n    };\r\n    Texts.prototype.makeBug = function () {\r\n        var _this = this;\r\n        this.bug = this.scene.add\r\n            .image(0, 0, 'bug')\r\n            .setOrigin(0)\r\n            .setScrollFactor(0)\r\n            .setDepth(100);\r\n        this.bug.setInteractive().on('pointerdown', function () {\r\n            _this.toggleHidden();\r\n        });\r\n    };\r\n    Texts.prototype.toggleHidden = function () {\r\n        this.hidden = !this.hidden;\r\n        for (var key in this.textObjects) {\r\n            this.textObjects[key].setAlpha(this.hidden ? 0 : 1);\r\n        }\r\n    };\r\n    Texts.prototype.resize = function () {\r\n        var _this = this;\r\n        texts.forEach(function (text) {\r\n            var textObj = _this.textObjects[text.type];\r\n            textObj.setPosition(_this.scene.cameras.main.width / 2, text.y);\r\n        });\r\n        if (this.bug)\r\n            this.bug.setPosition(16, 16);\r\n    };\r\n    Texts.prototype.setConnectCounter = function (connectCounter) {\r\n        this.textObjects['show_connected_users'].setText(\"Connected users: \" + connectCounter + \"/\" + _constants__WEBPACK_IMPORTED_MODULE_0__[\"MAX_PLAYERS_PER_ROOM\"]);\r\n    };\r\n    Texts.prototype.setRoomId = function (roomId) {\r\n        this.textObjects['the_room_id'].setText(\"RoomId \" + roomId);\r\n    };\r\n    Texts.prototype.setTime = function (time) {\r\n        this.textObjects['server_running_time'].setText(\"Server is running since \" + new Date(time).toUTCString());\r\n    };\r\n    Texts.prototype.setFps = function (fps) {\r\n        this.textObjects['show_fps'].setText(\"fps: \" + Math.round(fps));\r\n    };\r\n    Texts.prototype.setLatency = function (latency) {\r\n        if (isNaN(latency.current))\r\n            return;\r\n        if (isNaN(latency.high) || latency.current > latency.high)\r\n            latency.high = latency.current;\r\n        if (isNaN(latency.low) || latency.current < latency.low)\r\n            latency.low = latency.current;\r\n        var sum = latency.history.reduce(function (previous, current) { return (current += previous); });\r\n        var avg = sum / latency.history.length;\r\n        this.textObjects['show_latency'].setText(\"Latency \" + latency.current + \"ms (avg \" + Math.round(avg) + \"ms / low \" + latency.low + \"ms / high \" + latency.high + \"ms)\");\r\n    };\r\n    return Texts;\r\n}());\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Texts);\r\n\n\n//# sourceURL=webpack:///./src/client/components/texts.ts?");

/***/ }),

/***/ "./src/client/config.ts":
/*!******************************!*\
  !*** ./src/client/config.ts ***!
  \******************************/
/*! exports provided: world, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"world\", function() { return world; });\n/* harmony import */ var _scenes_preloadScene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scenes/preloadScene */ \"./src/client/scenes/preloadScene.ts\");\n/* harmony import */ var _scenes_menuScene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scenes/menuScene */ \"./src/client/scenes/menuScene.ts\");\n/* harmony import */ var _scenes_mainScene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scenes/mainScene */ \"./src/client/scenes/mainScene.ts\");\n\r\n\r\n\r\nvar DEFAULT_WIDTH = 1280;\r\nvar DEFAULT_HEIGHT = 720;\r\n// the size of the world\r\nvar world = {\r\n    x: 0,\r\n    y: 0,\r\n    width: 2560,\r\n    height: 864\r\n};\r\nvar config = {\r\n    type: Phaser.WEBGL,\r\n    backgroundColor: '#ffffff',\r\n    scale: {\r\n        parent: 'phaser-game',\r\n        mode: Phaser.Scale.NONE,\r\n        width: DEFAULT_WIDTH,\r\n        height: DEFAULT_HEIGHT\r\n    },\r\n    scene: [_scenes_preloadScene__WEBPACK_IMPORTED_MODULE_0__[\"default\"], _scenes_menuScene__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _scenes_mainScene__WEBPACK_IMPORTED_MODULE_2__[\"default\"]],\r\n    physics: {\r\n        default: 'matter',\r\n        matter: {\r\n            gravity: {\r\n                y: 0.8\r\n            },\r\n            debug: false,\r\n            debugBodyColor: 0xff00ff\r\n        }\r\n    }\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (config);\r\n\n\n//# sourceURL=webpack:///./src/client/config.ts?");

/***/ }),

/***/ "./src/client/scenes/mainScene.ts":
/*!****************************************!*\
  !*** ./src/client/scenes/mainScene.ts ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_texts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/texts */ \"./src/client/components/texts.ts\");\n/* harmony import */ var _components_cursors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/cursors */ \"./src/client/components/cursors.ts\");\n/* harmony import */ var _components_animations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/animations */ \"./src/client/components/animations.ts\");\n/* harmony import */ var _components_fullscreenButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/fullscreenButton */ \"./src/client/components/fullscreenButton.ts\");\n/* harmony import */ var _components_controls__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/controls */ \"./src/client/components/controls.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ \"./src/client/config.ts\");\n/* harmony import */ var _components_resize__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/resize */ \"./src/client/components/resize.ts\");\n/* harmony import */ var _server_managers_syncManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../server/managers/syncManager */ \"./src/server/managers/syncManager.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../constants */ \"./src/constants.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (undefined && undefined.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar MainScene = /** @class */ (function (_super) {\r\n    __extends(MainScene, _super);\r\n    function MainScene() {\r\n        var _this = _super.call(this, { key: 'MainScene' }) || this;\r\n        _this.objects = {};\r\n        _this.sync = {\r\n            initialState: false,\r\n            objects: []\r\n        };\r\n        _this.latency = {\r\n            current: NaN,\r\n            high: NaN,\r\n            low: NaN,\r\n            ping: NaN,\r\n            id: '',\r\n            canSend: true,\r\n            history: []\r\n        };\r\n        _this.level = 0;\r\n        return _this;\r\n    }\r\n    MainScene.prototype.init = function (props) {\r\n        var scene = props.scene, _a = props.level, level = _a === void 0 ? 0 : _a, socket = props.socket;\r\n        this.level = level;\r\n        this.socket = socket;\r\n        this.socket.emit('joinRoom', { scene: scene, level: level });\r\n    };\r\n    MainScene.prototype.create = function () {\r\n        var _this = this;\r\n        var socket = this.socket;\r\n        var levelText = this.add\r\n            .text(0, 0, \"Level \" + (this.level + 1), {\r\n            color: '#ffffff',\r\n            fontSize: 42\r\n        })\r\n            .setOrigin(0.5, 0)\r\n            .setDepth(100)\r\n            .setScrollFactor(0);\r\n        var starfield = this.add.tileSprite(_config__WEBPACK_IMPORTED_MODULE_5__[\"world\"].x, _config__WEBPACK_IMPORTED_MODULE_5__[\"world\"].y, _config__WEBPACK_IMPORTED_MODULE_5__[\"world\"].width, _config__WEBPACK_IMPORTED_MODULE_5__[\"world\"].height, 'starfield').setOrigin(0);\r\n        this.cursors = new _components_cursors__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this, socket);\r\n        this.controls = new _components_controls__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this, socket);\r\n        var texts = new _components_texts__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this);\r\n        var fullscreenBtn = Object(_components_fullscreenButton__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this);\r\n        this.cameras.main.setBounds(_config__WEBPACK_IMPORTED_MODULE_5__[\"world\"].x, _config__WEBPACK_IMPORTED_MODULE_5__[\"world\"].y, _config__WEBPACK_IMPORTED_MODULE_5__[\"world\"].width, _config__WEBPACK_IMPORTED_MODULE_5__[\"world\"].height);\r\n        socket.on('getPong', function (id) {\r\n            if (_this.latency.id !== id)\r\n                return;\r\n            _this.latency.canSend = true;\r\n            _this.latency.current = new Date().getTime() - _this.latency.ping;\r\n            if (_this.latency.history.length >= 200)\r\n                _this.latency.history.shift();\r\n            _this.latency.history.push(_this.latency.current);\r\n            texts.setLatency(_this.latency);\r\n        });\r\n        this.time.addEvent({\r\n            delay: 250,\r\n            loop: true,\r\n            callback: function () {\r\n                if (!_this.latency.canSend)\r\n                    return;\r\n                if (texts.hidden)\r\n                    return;\r\n                _this.latency.ping = new Date().getTime();\r\n                _this.latency.id = Phaser.Math.RND.uuid();\r\n                _this.latency.canSend = false;\r\n                socket.emit('sendPing', _this.latency.id);\r\n            }\r\n        });\r\n        socket.on('changingRoom', function (data) {\r\n            console.log('You are changing room');\r\n            // destroy all objects and get new onces\r\n            Object.keys(_this.objects).forEach(function (key) {\r\n                _this.objects[key].sprite.destroy();\r\n                delete _this.objects[key];\r\n            });\r\n            socket.emit('getInitialState');\r\n            _this.level = data.level | 0;\r\n            levelText.setText(\"Level \" + (_this.level + 1));\r\n        });\r\n        socket.on('S' /* short for syncGame */, function (res) {\r\n            if (res.connectCounter)\r\n                texts.setConnectCounter(res.connectCounter);\r\n            if (res.time)\r\n                texts.setTime(res.time);\r\n            if (res.roomId)\r\n                texts.setRoomId(res.roomId);\r\n            // res.O (objects) contains only the objects that need to be updated\r\n            if (res.O /* short for objects */) {\r\n                res.O = _server_managers_syncManager__WEBPACK_IMPORTED_MODULE_7__[\"default\"].decode(res.O);\r\n                _this.sync.objects = __spreadArrays(_this.sync.objects, res.O);\r\n                _this.sync.objects.forEach(function (obj) {\r\n                    // the if the player's dude is in the objects list the camera follows it sprite\r\n                    if (_this.objects[obj.id] && obj.skin === _constants__WEBPACK_IMPORTED_MODULE_8__[\"SKINS\"].DUDE && obj.clientId && +obj.clientId === +socket.clientId) {\r\n                        _this.cameras.main.setScroll(obj.x - _this.cameras.main.width / 2, obj.y - _this.cameras.main.height / 2);\r\n                    }\r\n                    // if the object does not exist, create a new one\r\n                    if (!_this.objects[obj.id]) {\r\n                        var sprite_1 = _this.add\r\n                            .sprite(obj.x, obj.y, obj.skin.toString())\r\n                            .setOrigin(0.5)\r\n                            .setRotation(obj.angle || 0);\r\n                        // add the sprite by id to the objects object\r\n                        _this.objects[obj.id] = {\r\n                            sprite: sprite_1\r\n                        };\r\n                    }\r\n                    // set some properties to the sprite\r\n                    var sprite = _this.objects[obj.id].sprite;\r\n                    // set scale\r\n                    if (obj.scale) {\r\n                        sprite.setScale(obj.scale);\r\n                    }\r\n                    // set scale\r\n                    if (obj.tint) {\r\n                        sprite.setTint(obj.tint);\r\n                    }\r\n                    // set visibility\r\n                    sprite.setVisible(!obj.dead);\r\n                });\r\n            }\r\n        });\r\n        // request the initial state\r\n        socket.emit('getInitialState');\r\n        // request the initial state every 15 seconds\r\n        // to make sure all objects are up to date\r\n        // in case we missed one (network issues)\r\n        // should be sent from the server side not the client\r\n        // this.time.addEvent({\r\n        //   delay: 15000,\r\n        //   loop: true,\r\n        //   callback: () => {\r\n        //     socket.emit('getInitialState')\r\n        //   }\r\n        // })\r\n        // request the initial state if the game gets focus\r\n        // e.g. if the users comes from another tab or window\r\n        this.game.events.on('focus', function () { return socket.emit('getInitialState'); });\r\n        // this helps debugging\r\n        this.input.on('pointerdown', function (pointer) {\r\n            console.log(pointer.worldX, pointer.worldY);\r\n        });\r\n        var resize = function () {\r\n            starfield.setScale(Math.max(_this.cameras.main.height / starfield.height, 1));\r\n            texts.resize();\r\n            if (_this.controls)\r\n                _this.controls.resize();\r\n            fullscreenBtn.setPosition(_this.cameras.main.width - 16, 16);\r\n            _this.cameras.main.setScroll(_this.cameras.main.worldView.x, _config__WEBPACK_IMPORTED_MODULE_5__[\"world\"].height);\r\n            levelText.setPosition(_this.cameras.main.width / 2, 20);\r\n        };\r\n        this.scale.on('resize', function (gameSize, baseSize, displaySize, resolution) {\r\n            _this.cameras.resize(gameSize.width, gameSize.height);\r\n            resize();\r\n        });\r\n        Object(_components_resize__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this.game);\r\n    };\r\n    MainScene.prototype.update = function (time, delta) {\r\n        var _this = this;\r\n        // update all objects\r\n        if (this.sync.objects.length > 0) {\r\n            this.sync.objects.forEach(function (obj) {\r\n                if (_this.objects[obj.id]) {\r\n                    var sprite = _this.objects[obj.id].sprite;\r\n                    if (obj.dead !== null)\r\n                        sprite.setVisible(!obj.dead);\r\n                    if (obj.x !== null)\r\n                        sprite.x = obj.x;\r\n                    if (obj.y !== null)\r\n                        sprite.y = obj.y;\r\n                    if (obj.angle !== null && typeof obj.angle !== 'undefined')\r\n                        sprite.angle = obj.angle;\r\n                    if (obj.skin !== null) {\r\n                        if (obj.skin === _constants__WEBPACK_IMPORTED_MODULE_8__[\"SKINS\"].MUMMY) {\r\n                            if (obj.direction !== null)\r\n                                Object(_components_animations__WEBPACK_IMPORTED_MODULE_2__[\"setMummyAnimation\"])(sprite, obj.direction);\r\n                        }\r\n                        if (obj.skin === _constants__WEBPACK_IMPORTED_MODULE_8__[\"SKINS\"].DUDE) {\r\n                            if (obj.animation !== null)\r\n                                Object(_components_animations__WEBPACK_IMPORTED_MODULE_2__[\"setDudeAnimation\"])(sprite, obj.animation);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        this.sync.objects = [];\r\n    };\r\n    return MainScene;\r\n}(Phaser.Scene));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (MainScene);\r\n\n\n//# sourceURL=webpack:///./src/client/scenes/mainScene.ts?");

/***/ }),

/***/ "./src/client/scenes/menuScene.ts":
/*!****************************************!*\
  !*** ./src/client/scenes/menuScene.ts ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_resize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/resize */ \"./src/client/components/resize.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\nvar MenuScene = /** @class */ (function (_super) {\r\n    __extends(MenuScene, _super);\r\n    function MenuScene() {\r\n        return _super.call(this, { key: 'MenuScene' }) || this;\r\n    }\r\n    MenuScene.prototype.init = function (props) {\r\n        var socket = props.socket;\r\n        this.socket = socket;\r\n    };\r\n    MenuScene.prototype.create = function () {\r\n        var _this = this;\r\n        var styles = {\r\n            color: '#000000',\r\n            align: 'center',\r\n            fontSize: 52\r\n        };\r\n        var texts = [];\r\n        texts.push(this.add.text(0, 0, 'Choose which Level\\nyou want to play', styles).setOrigin(0.5, 0));\r\n        texts.push(this.add\r\n            .text(0, 0, 'Matter Physics', styles)\r\n            .setOrigin(0.5, 0)\r\n            .setInteractive()\r\n            .on('pointerdown', function () {\r\n            _this.scene.start('MainScene', { scene: 'MatterScene', level: 0, socket: _this.socket });\r\n        }));\r\n        texts.push(this.add\r\n            .text(0, 0, 'Arcade Physics (Level 1)', styles)\r\n            .setOrigin(0.5, 0)\r\n            .setInteractive()\r\n            .on('pointerdown', function () {\r\n            _this.scene.start('MainScene', { scene: 'ArcadeScene', level: 0, socket: _this.socket });\r\n        }));\r\n        texts.push(this.add\r\n            .text(0, 0, 'Arcade Physics (Level 2)', styles)\r\n            .setOrigin(0.5, 0)\r\n            .setInteractive()\r\n            .on('pointerdown', function () {\r\n            _this.scene.stop();\r\n            _this.scene.start('MainScene', { scene: 'ArcadeScene', level: 1, socket: _this.socket });\r\n        }));\r\n        texts.push(this.add\r\n            .text(0, 0, 'Arcade Physics (Level 3)', styles)\r\n            .setOrigin(0.5, 0)\r\n            .setInteractive()\r\n            .on('pointerdown', function () {\r\n            _this.scene.stop();\r\n            _this.scene.start('MainScene', { scene: 'ArcadeScene', level: 2, socket: _this.socket });\r\n        }));\r\n        var resize = function () {\r\n            var _a = _this.cameras.main, centerX = _a.centerX, centerY = _a.centerY;\r\n            var posY = [20, centerY - 100, centerY - 10, centerY + 60, centerY + 130];\r\n            texts.forEach(function (text, i) {\r\n                text.setPosition(centerX, posY[i]);\r\n            });\r\n        };\r\n        this.scale.on('resize', function (gameSize, baseSize, displaySize, resolution) {\r\n            if (!_this.scene.isActive())\r\n                return;\r\n            _this.cameras.resize(gameSize.width, gameSize.height);\r\n            resize();\r\n        });\r\n        resize();\r\n        Object(_components_resize__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this.game);\r\n    };\r\n    return MenuScene;\r\n}(Phaser.Scene));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (MenuScene);\r\n\n\n//# sourceURL=webpack:///./src/client/scenes/menuScene.ts?");

/***/ }),

/***/ "./src/client/scenes/preloadScene.ts":
/*!*******************************************!*\
  !*** ./src/client/scenes/preloadScene.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io-client */ \"./node_modules/socket.io-client/lib/index.js\");\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(socket_io_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../constants */ \"./src/constants.ts\");\n/* harmony import */ var _components_animations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/animations */ \"./src/client/components/animations.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\nvar PreloadScene = /** @class */ (function (_super) {\r\n    __extends(PreloadScene, _super);\r\n    function PreloadScene() {\r\n        return _super.call(this, { key: 'PreloadScene' }) || this;\r\n    }\r\n    PreloadScene.prototype.preload = function () {\r\n        this.load.setBaseURL('static/client');\r\n        this.load.image(_constants__WEBPACK_IMPORTED_MODULE_1__[\"SKINS\"].BOX.toString(), 'assets/box.png');\r\n        this.load.image(_constants__WEBPACK_IMPORTED_MODULE_1__[\"SKINS\"].STAR.toString(), 'assets/star.png');\r\n        this.load.image('bug', 'assets/bug.png');\r\n        this.load.image('starfield', 'assets/starfield.jpg');\r\n        this.load.image('controls', 'assets/controls.png');\r\n        this.load.spritesheet(_constants__WEBPACK_IMPORTED_MODULE_1__[\"SKINS\"].DUDE.toString(), 'assets/dude.png', {\r\n            frameWidth: 32,\r\n            frameHeight: 48\r\n        });\r\n        this.load.spritesheet('fullscreen', 'assets/fullscreen.png', {\r\n            frameWidth: 64,\r\n            frameHeight: 64\r\n        });\r\n        this.load.spritesheet(_constants__WEBPACK_IMPORTED_MODULE_1__[\"SKINS\"].MUMMY.toString(), 'assets/mummy37x45.png', { frameWidth: 37, frameHeight: 45 });\r\n    };\r\n    PreloadScene.prototype.create = function () {\r\n        var _this = this;\r\n        Object(_components_animations__WEBPACK_IMPORTED_MODULE_2__[\"createDudeAnimations\"])(this);\r\n        Object(_components_animations__WEBPACK_IMPORTED_MODULE_2__[\"createMummyAnimation\"])(this);\r\n        // connecting to socket.io\r\n        var url = location.origin + \"/G\"; /* short for stats */\r\n        var socket = socket_io_client__WEBPACK_IMPORTED_MODULE_0___default.a.connect(url, { transports: ['websocket'] });\r\n        // on reconnection, reset the transports option, as the Websocket\r\n        // connection may have failed (caused by proxy, firewall, browser, ...)\r\n        socket.on('reconnect_attempt', function () {\r\n            socket.io.opts.transports = ['polling', 'websocket'];\r\n        });\r\n        socket.on('connect', function () {\r\n            console.log(\"You're connected to socket.io\");\r\n        });\r\n        // we wait until we have a valid clientId, then start the MainScene\r\n        socket.on('clientId', function (clientId) {\r\n            socket.clientId = clientId;\r\n            console.log('Your client id', clientId);\r\n            _this.scene.start('MenuScene', { socket: socket });\r\n        });\r\n    };\r\n    return PreloadScene;\r\n}(Phaser.Scene));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (PreloadScene);\r\n\n\n//# sourceURL=webpack:///./src/client/scenes/preloadScene.ts?");

/***/ }),

/***/ "./src/constants.ts":
/*!**************************!*\
  !*** ./src/constants.ts ***!
  \**************************/
/*! exports provided: SKINS, MAX_PLAYERS_PER_ROOM, USER_KICK_TIMEOUT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SKINS\", function() { return SKINS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MAX_PLAYERS_PER_ROOM\", function() { return MAX_PLAYERS_PER_ROOM; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"USER_KICK_TIMEOUT\", function() { return USER_KICK_TIMEOUT; });\nvar SKINS = {\r\n    DUDE: 0,\r\n    BOX: 1,\r\n    STAR: 2,\r\n    MUMMY: 3\r\n};\r\nvar MAX_PLAYERS_PER_ROOM = 4;\r\nvar USER_KICK_TIMEOUT = 60000; // 1 minute\r\n\n\n//# sourceURL=webpack:///./src/constants.ts?");

/***/ }),

/***/ "./src/physics/game.ts":
/*!*****************************!*\
  !*** ./src/physics/game.ts ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _server_game_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../server/game/config */ \"./src/server/game/config.ts\");\n/* harmony import */ var _server_game_scenes_arcadeScene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../server/game/scenes/arcadeScene */ \"./src/server/game/scenes/arcadeScene.ts\");\n/* harmony import */ var _server_game_scenes_matterScene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../server/game/scenes/matterScene */ \"./src/server/game/scenes/matterScene.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (undefined && undefined.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\n\r\n\r\nvar PhaserGame = /** @class */ (function (_super) {\r\n    __extends(PhaserGame, _super);\r\n    function PhaserGame(io, config) {\r\n        var _this = _super.call(this, config) || this;\r\n        _this.io = io;\r\n        _this.debug = true;\r\n        return _this;\r\n    }\r\n    return PhaserGame;\r\n}(Phaser.Game));\r\nvar Game = function (io) {\r\n    var config = __assign({}, _server_game_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\r\n    var href = location.href;\r\n    config.type = Phaser.AUTO;\r\n    config.scale = {\r\n        mode: Phaser.Scale.FIT,\r\n        autoCenter: Phaser.Scale.CENTER_BOTH\r\n    };\r\n    if (/arcade/.test(href)) {\r\n        config.scene = [_server_game_scenes_arcadeScene__WEBPACK_IMPORTED_MODULE_1__[\"default\"]];\r\n        config.physics = _server_game_config__WEBPACK_IMPORTED_MODULE_0__[\"arcadePhysics\"];\r\n        // @ts-ignore\r\n        config.physics.arcade.debug = true;\r\n    }\r\n    if (/matter/.test(href)) {\r\n        config.scene = [_server_game_scenes_matterScene__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\r\n        config.physics = _server_game_config__WEBPACK_IMPORTED_MODULE_0__[\"matterPhysics\"];\r\n        if (config.physics.matter)\r\n            config.physics.matter.debug = true;\r\n    }\r\n    return new PhaserGame(io, config);\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Game);\r\n\n\n//# sourceURL=webpack:///./src/physics/game.ts?");

/***/ }),

/***/ "./src/physics/index.ts":
/*!******************************!*\
  !*** ./src/physics/index.ts ***!
  \******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game */ \"./src/physics/game.ts\");\n\r\n// mock the socket.io\r\nvar ioMock = {\r\n    emit: function () { },\r\n    on: function () { },\r\n    in: function () { },\r\n    connected: 'connected'\r\n};\r\nwindow.addEventListener('load', function () {\r\n    // @ts-ignore\r\n    window.game = Object(_game__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(ioMock);\r\n});\r\n\n\n//# sourceURL=webpack:///./src/physics/index.ts?");

/***/ }),

/***/ "./src/server/game/arcadeObjects/box.ts":
/*!**********************************************!*\
  !*** ./src/server/game/arcadeObjects/box.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../constants */ \"./src/constants.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\nvar Box = /** @class */ (function (_super) {\r\n    __extends(Box, _super);\r\n    function Box(scene, id, x, y) {\r\n        var _this = _super.call(this, scene, x, y, '') || this;\r\n        _this.skin = _constants__WEBPACK_IMPORTED_MODULE_0__[\"SKINS\"].BOX;\r\n        _this.sync = true;\r\n        scene.add.existing(_this);\r\n        scene.physics.add.existing(_this, true);\r\n        // @ts-ignore\r\n        _this.body\r\n            .setSize(95, 95)\r\n            // 32 is the default width an height for an sprite if the texture can not be loaded\r\n            .setOffset(-32, -32);\r\n        _this.id = id.toString();\r\n        return _this;\r\n    }\r\n    return Box;\r\n}(Phaser.Physics.Arcade.Sprite));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Box);\r\n\n\n//# sourceURL=webpack:///./src/server/game/arcadeObjects/box.ts?");

/***/ }),

/***/ "./src/server/game/arcadeObjects/dude.ts":
/*!***********************************************!*\
  !*** ./src/server/game/arcadeObjects/dude.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../constants */ \"./src/constants.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (undefined && undefined.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nvar Dude = /** @class */ (function (_super) {\r\n    __extends(Dude, _super);\r\n    function Dude(scene, id, options) {\r\n        var _this = _super.call(this, scene, 0, 0, '') || this;\r\n        _this.skin = _constants__WEBPACK_IMPORTED_MODULE_0__[\"SKINS\"].DUDE;\r\n        _this.updates = {};\r\n        _this.shouldUpdate = true;\r\n        _this.prevPosition = {\r\n            x: -1,\r\n            y: -1\r\n        };\r\n        _this.dead = false;\r\n        _this.prevDead = false;\r\n        _this.color = 0xffffff;\r\n        _this.prevColor = 0xffffff;\r\n        _this.animation = undefined;\r\n        _this.hit = false;\r\n        scene.add.existing(_this);\r\n        scene.physics.add.existing(_this);\r\n        _this.setFrame(0);\r\n        _this.socketId = options.socketId;\r\n        _this.clientId = options.clientId;\r\n        _this.setNewPosition();\r\n        _this.setCollideWorldBounds(true).setOrigin(0);\r\n        // @ts-ignore\r\n        _this.body.setSize(32, 48);\r\n        // matterJS uses an id per object, so I do the same here to be consistent\r\n        // @ts-ignore\r\n        _this.id = id.toString();\r\n        return _this;\r\n    }\r\n    Dude.prototype.setNewPosition = function () {\r\n        this.setPosition(Phaser.Math.RND.integerInRange(0, 1000), Phaser.Math.RND.integerInRange(100, 300));\r\n    };\r\n    Dude.prototype.postUpdate = function () {\r\n        this.prevPosition = __assign({}, this.body.position);\r\n        this.prevDead = this.dead;\r\n        this.prevColor = this.color;\r\n    };\r\n    Dude.prototype.gotHit = function () {\r\n        var _this = this;\r\n        if (this.hit)\r\n            return;\r\n        this.hit = true;\r\n        this.color = 0xff0000;\r\n        this.scene.time.addEvent({\r\n            delay: 3500,\r\n            callback: function () {\r\n                _this.hit = false;\r\n                _this.color = 0xffffff;\r\n            }\r\n        });\r\n    };\r\n    Dude.prototype.update = function () {\r\n        if (!this.active)\r\n            return;\r\n        if (!this.shouldUpdate)\r\n            return;\r\n        this.shouldUpdate = false;\r\n        if (this.updates.left)\r\n            this.setVelocityX(-400);\r\n        else if (this.updates.right)\r\n            this.setVelocityX(400);\r\n        else\r\n            this.setVelocityX(0);\r\n        if (this.updates.up && this.body.blocked.down)\r\n            this.setVelocityY(-600);\r\n        this.animation = this.body.velocity.x >= 0.5 ? 'right' : this.body.velocity.x <= -0.5 ? 'left' : 'idle';\r\n        this.updates = {};\r\n    };\r\n    Dude.prototype.revive = function (clientId, socketId) {\r\n        this.setActive(true);\r\n        this.dead = false;\r\n        this.setNewPosition();\r\n        this.clientId = clientId;\r\n        this.socketId = socketId;\r\n    };\r\n    Dude.prototype.kill = function () {\r\n        this.setActive(false);\r\n        this.dead = true;\r\n    };\r\n    Dude.prototype.setUpdates = function (updates) {\r\n        this.shouldUpdate = true;\r\n        this.updates = updates;\r\n    };\r\n    return Dude;\r\n}(Phaser.Physics.Arcade.Sprite));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Dude);\r\n\n\n//# sourceURL=webpack:///./src/server/game/arcadeObjects/dude.ts?");

/***/ }),

/***/ "./src/server/game/arcadeObjects/map.ts":
/*!**********************************************!*\
  !*** ./src/server/game/arcadeObjects/map.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar Map = /** @class */ (function () {\r\n    function Map(scene, world, level) {\r\n        this.scene = scene;\r\n        this.world = world;\r\n        this.level = level;\r\n        this.tileSize = 95;\r\n        this.levels = [\r\n            [\r\n                '    XXX  M    M      XXXXXX',\r\n                '        XX       X X       ',\r\n                ' XX  X X   XXXXX     X     ',\r\n                '   M    M         M X    G ',\r\n                'XX    XXXX       XXX     X ',\r\n                'XXXX       X   X       X   '\r\n            ],\r\n            [\r\n                '                           ',\r\n                '        M        X X       ',\r\n                ' XX  X XXXXX XXX     X     ',\r\n                ' G      M           X      ',\r\n                'XX    XXXX M     XXX     X ',\r\n                'XXXX XXXXXXXXX X       X   '\r\n            ],\r\n            [\r\n                '           M       G       ',\r\n                '        XXXXXXX  X X       ',\r\n                ' XX  X XXXXX XXX     X     ',\r\n                '        M           X      ',\r\n                'XX    XXXX       XXX     X ',\r\n                'XXXX XXXXXXXXX X       X   '\r\n            ]\r\n        ];\r\n        this.margin = {\r\n            y: 3 * this.tileSize + 11 + 45,\r\n            x: world.x + 45\r\n        };\r\n    }\r\n    Map.prototype.collideRect = function (rect1, rect2) {\r\n        return (rect1.x < rect2.x + rect2.width &&\r\n            rect1.x + rect1.width > rect2.x &&\r\n            rect1.y < rect2.y + rect2.height &&\r\n            rect1.y + rect1.height > rect2.y);\r\n    };\r\n    Map.prototype.getTileByCoordinates = function (coordinates) {\r\n        var _this = this;\r\n        var x1 = coordinates.x, y1 = coordinates.y;\r\n        var tile = { tile: '', x: -1, y: -1 };\r\n        this.getLevel().forEach(function (row, y) {\r\n            for (var x = 0; x < row.length; x++) {\r\n                var x2 = x * _this.tileSize + _this.margin.x;\r\n                var y2 = y * _this.tileSize + _this.margin.y;\r\n                x2 -= 45; // minus the half of a the box\r\n                y2 -= 45; // minus the half of a the box\r\n                if (_this.collideRect({ x: x1, y: y1, width: 1, height: 1 }, { x: x2, y: y2, width: _this.tileSize, height: _this.tileSize })) {\r\n                    tile = { tile: row[x], x: x2, y: y2 };\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        return tile;\r\n    };\r\n    Map.prototype.countTotalLevels = function () {\r\n        return this.levels.length;\r\n    };\r\n    Map.prototype.getLevel = function () {\r\n        return this.levels[this.level];\r\n    };\r\n    return Map;\r\n}());\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Map);\r\n\n\n//# sourceURL=webpack:///./src/server/game/arcadeObjects/map.ts?");

/***/ }),

/***/ "./src/server/game/arcadeObjects/mummy.ts":
/*!************************************************!*\
  !*** ./src/server/game/arcadeObjects/mummy.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../constants */ \"./src/constants.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\nvar Mummy = /** @class */ (function (_super) {\r\n    __extends(Mummy, _super);\r\n    function Mummy(scene, id, x, y) {\r\n        var _this = _super.call(this, scene, x, y, '') || this;\r\n        _this.skin = _constants__WEBPACK_IMPORTED_MODULE_0__[\"SKINS\"].MUMMY;\r\n        _this.dead = false;\r\n        scene.add.existing(_this);\r\n        scene.physics.add.existing(_this);\r\n        _this.setFrame(0);\r\n        _this.direction = Math.random() > 0.5 ? 'left' : 'right';\r\n        // @ts-ignore\r\n        _this.body.setSize(37, 45);\r\n        _this.id = id.toString();\r\n        return _this;\r\n    }\r\n    Mummy.prototype.kill = function () {\r\n        var _this = this;\r\n        if (this.dead)\r\n            return;\r\n        this.dead = true;\r\n        this.scene.time.addEvent({\r\n            delay: 5000,\r\n            callback: function () { return (_this.dead = false); }\r\n        });\r\n    };\r\n    Mummy.prototype.getLookAhead = function () {\r\n        var x = this.direction === 'right' ? this.body.right + 5 : this.body.left - 5;\r\n        var y = this.body.bottom + 10;\r\n        return { x: x, y: y };\r\n    };\r\n    Mummy.prototype.changeDirection = function (tile) {\r\n        if (tile.tile !== 'X') {\r\n            this.direction = this.direction === 'right' ? 'left' : 'right';\r\n        }\r\n    };\r\n    Mummy.prototype.move = function () {\r\n        var velocity = this.direction === 'right' ? 35 : -35;\r\n        if (this.dead)\r\n            velocity = 0;\r\n        this.setVelocityX(velocity);\r\n    };\r\n    Mummy.prototype.update = function () {\r\n        this.move();\r\n    };\r\n    return Mummy;\r\n}(Phaser.Physics.Arcade.Sprite));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Mummy);\r\n\n\n//# sourceURL=webpack:///./src/server/game/arcadeObjects/mummy.ts?");

/***/ }),

/***/ "./src/server/game/arcadeObjects/star.ts":
/*!***********************************************!*\
  !*** ./src/server/game/arcadeObjects/star.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../constants */ \"./src/constants.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\nvar Star = /** @class */ (function (_super) {\r\n    __extends(Star, _super);\r\n    function Star(scene, id, x, y) {\r\n        var _this = _super.call(this, scene, x, y, '') || this;\r\n        _this.skin = _constants__WEBPACK_IMPORTED_MODULE_0__[\"SKINS\"].STAR;\r\n        _this.sync = true;\r\n        _this.tint = 0x00ff00;\r\n        scene.add.existing(_this);\r\n        scene.physics.add.existing(_this, true);\r\n        // @ts-ignore\r\n        _this.body.setSize(24, 22, false);\r\n        _this.id = id.toString();\r\n        return _this;\r\n    }\r\n    return Star;\r\n}(Phaser.Physics.Arcade.Sprite));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Star);\r\n\n\n//# sourceURL=webpack:///./src/server/game/arcadeObjects/star.ts?");

/***/ }),

/***/ "./src/server/game/config.ts":
/*!***********************************!*\
  !*** ./src/server/game/config.ts ***!
  \***********************************/
/*! exports provided: default, arcadePhysics, matterPhysics */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"arcadePhysics\", function() { return arcadePhysics; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"matterPhysics\", function() { return matterPhysics; });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"./node_modules/phaser/src/phaser.js\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n\r\nvar config = {\r\n    type: Phaser.HEADLESS,\r\n    parent: 'phaser-game',\r\n    width: 1280,\r\n    height: 720,\r\n    banner: false,\r\n    // @ts-ignore\r\n    audio: false\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (config);\r\nvar arcadePhysics = {\r\n    default: 'arcade',\r\n    arcade: {\r\n        gravity: { y: 1500 }\r\n    }\r\n};\r\nvar matterPhysics = {\r\n    default: 'matter',\r\n    matter: {\r\n        gravity: {\r\n            y: 2\r\n        }\r\n    }\r\n};\r\n\n\n//# sourceURL=webpack:///./src/server/game/config.ts?");

/***/ }),

/***/ "./src/server/game/matterObjects/box.ts":
/*!**********************************************!*\
  !*** ./src/server/game/matterObjects/box.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _matterGameObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./matterGameObject */ \"./src/server/game/matterObjects/matterGameObject.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../constants */ \"./src/constants.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar Box = /** @class */ (function (_super) {\r\n    __extends(Box, _super);\r\n    function Box(scene, x, y) {\r\n        var _this = _super.call(this, scene, _constants__WEBPACK_IMPORTED_MODULE_1__[\"SKINS\"].BOX) || this;\r\n        _this.scene = scene;\r\n        _this.addBody(_this.Matter.Bodies.rectangle(x, y, 95, 95, {\r\n            friction: 0.1,\r\n            chamfer: { radius: 14 },\r\n            label: 'box',\r\n            density: 0.000125\r\n        }));\r\n        _this.lifeTime = Phaser.Math.RND.integerInRange(1000 * 15, 1000 * 45);\r\n        _this.setTimer();\r\n        return _this;\r\n    }\r\n    Box.prototype.setTimer = function () {\r\n        var _this = this;\r\n        this.scene.time.addEvent({\r\n            delay: this.lifeTime,\r\n            callback: function () {\r\n                _this.kill();\r\n            }\r\n        });\r\n    };\r\n    Box.prototype.revive = function (x, y) {\r\n        _super.prototype.revive.call(this, x, y);\r\n        this.setTimer();\r\n    };\r\n    return Box;\r\n}(_matterGameObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Box);\r\n\n\n//# sourceURL=webpack:///./src/server/game/matterObjects/box.ts?");

/***/ }),

/***/ "./src/server/game/matterObjects/dude.ts":
/*!***********************************************!*\
  !*** ./src/server/game/matterObjects/dude.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _matterGameObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./matterGameObject */ \"./src/server/game/matterObjects/matterGameObject.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../constants */ \"./src/constants.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar Dude = /** @class */ (function (_super) {\r\n    __extends(Dude, _super);\r\n    function Dude(scene, x, y, clientId, socketId) {\r\n        var _this = _super.call(this, scene, _constants__WEBPACK_IMPORTED_MODULE_1__[\"SKINS\"].DUDE) || this;\r\n        _this.clientId = clientId;\r\n        _this.socketId = socketId;\r\n        _this.maxVelocity = {\r\n            x: 6,\r\n            y: 12\r\n        };\r\n        _this.width = 32;\r\n        _this.height = 48;\r\n        _this.shouldUpdate = true;\r\n        _this.translateX = 0;\r\n        _this.translateY = 0;\r\n        _this.jumpLocked = false;\r\n        _this.move = {\r\n            leftAllowed: true,\r\n            rightAllowed: true\r\n        };\r\n        _this.touching = {\r\n            left: false,\r\n            right: false,\r\n            bottom: false\r\n        };\r\n        _this.updates = {};\r\n        var h = _this.height;\r\n        var w = _this.width - 4;\r\n        console.log('clientId', clientId);\r\n        _this.mainBody = _this.Matter.Bodies.rectangle(x, y, w, h, {\r\n            density: 0.001,\r\n            friction: 0.1,\r\n            frictionStatic: 0.1,\r\n            label: 'dude',\r\n            chamfer: { radius: 10 }\r\n        });\r\n        _this.sensors = {\r\n            bottom: _this.Matter.Bodies.rectangle(x, y + h / 2 + 2 / 2, w * 0.35, 4, {\r\n                isSensor: true\r\n            }),\r\n            left: _this.Matter.Bodies.rectangle(x - w / 2 - 4 / 2, y + 0, 4, h * 0.9, {\r\n                isSensor: true\r\n            }),\r\n            right: _this.Matter.Bodies.rectangle(x + w / 2 + 4 / 2, y + 0, 4, h * 0.9, {\r\n                isSensor: true\r\n            })\r\n        };\r\n        _this.addBodies([_this.mainBody, _this.sensors.bottom, _this.sensors.left, _this.sensors.right]);\r\n        _this.setSensorLabel();\r\n        _this.Matter.Body.setInertia(_this.body, Infinity); // setFixedRotation\r\n        return _this;\r\n    }\r\n    Dude.prototype.setTranslate = function (x, y) {\r\n        if (y === void 0) { y = 0; }\r\n        this.translateX = x;\r\n        this.translateY = y;\r\n    };\r\n    Dude.prototype.translate = function () {\r\n        if (this.translateX !== 0 || this.translateY !== 0) {\r\n            this.Matter.Body.setPosition(this.body, {\r\n                x: this.body.position.x + this.translateX,\r\n                y: this.body.position.y + this.translateY\r\n            });\r\n            this.translateX = 0;\r\n            this.translateY = 0;\r\n        }\r\n    };\r\n    Dude.prototype.setSensorLabel = function () {\r\n        this.sensors.bottom.label = \"dudeBottomSensor_\" + this.clientId;\r\n        this.sensors.left.label = \"dudeLeftSensor_\" + this.clientId;\r\n        this.sensors.right.label = \"dudeRightSensor_\" + this.clientId;\r\n    };\r\n    Dude.prototype.revive = function (x, y, clientId, socketId) {\r\n        _super.prototype.revive.call(this, x, y);\r\n        this.clientId = clientId;\r\n        this.socketId = socketId;\r\n        this.setSensorLabel();\r\n    };\r\n    Dude.prototype.lockJump = function () {\r\n        var _this = this;\r\n        this.jumpLocked = true;\r\n        this.scene.time.addEvent({\r\n            delay: 250,\r\n            callback: function () { return (_this.jumpLocked = false); }\r\n        });\r\n    };\r\n    Dude.prototype.setUpdates = function (updates) {\r\n        this.shouldUpdate = true;\r\n        this.updates = updates;\r\n    };\r\n    Dude.prototype.update = function (force) {\r\n        if (force === void 0) { force = false; }\r\n        this.animation = 'idle';\r\n        if (!force && !this.shouldUpdate)\r\n            return;\r\n        var updates = this.updates;\r\n        var x = updates.left && this.move.leftAllowed ? -0.01 : updates.right && this.move.rightAllowed ? 0.01 : 0;\r\n        var y = !this.jumpLocked && updates.up && this.touching.bottom ? -this.maxVelocity.y : 0;\r\n        if (y !== 0)\r\n            this.lockJump();\r\n        // We use setVelocity to jump and applyForce to move right and left\r\n        // Jump\r\n        if (y !== 0)\r\n            this.Matter.Body.setVelocity(this.body, { x: this.body.velocity.x, y: y });\r\n        // Move\r\n        this.Matter.Body.applyForce(this.body, { x: 0, y: 0 }, { x: x, y: 0 });\r\n        // check max velocity\r\n        var maxVelocityX = this.body.velocity.x > this.maxVelocity.x ? 1 : this.body.velocity.x < -this.maxVelocity.x ? -1 : null;\r\n        if (maxVelocityX)\r\n            this.Matter.Body.setVelocity(this.body, { x: this.maxVelocity.x * maxVelocityX, y: this.body.velocity.y });\r\n        // set velocity X to zero\r\n        if (!updates.left && !updates.right) {\r\n            this.Matter.Body.setVelocity(this.body, { x: this.body.velocity.x * 0.5, y: this.body.velocity.y });\r\n        }\r\n        this.animation = this.body.velocity.x >= 0.5 ? 'right' : this.body.velocity.x <= -0.5 ? 'left' : 'idle';\r\n        this.translate();\r\n        this.touching = {\r\n            left: false,\r\n            right: false,\r\n            bottom: false\r\n        };\r\n        this.move = {\r\n            leftAllowed: true,\r\n            rightAllowed: true\r\n        };\r\n        this.updates = {};\r\n        this.shouldUpdate = false;\r\n    };\r\n    return Dude;\r\n}(_matterGameObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Dude);\r\n\n\n//# sourceURL=webpack:///./src/server/game/matterObjects/dude.ts?");

/***/ }),

/***/ "./src/server/game/matterObjects/matterGameObject.ts":
/*!***********************************************************!*\
  !*** ./src/server/game/matterObjects/matterGameObject.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar __assign = (undefined && undefined.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar MatterGameObject = /** @class */ (function () {\r\n    function MatterGameObject(scene, skin) {\r\n        this.scene = scene;\r\n        this.skin = skin;\r\n        this.clientId = undefined;\r\n        this.dead = false;\r\n        this.prevDead = false;\r\n        this.angle = 0; // in DEG\r\n        this.prevAngle = -1; // in DEG\r\n        this.animation = 'idle';\r\n        this.prevAnimation = 'idle';\r\n        this.tint = 0x000000;\r\n        this.Matter = Phaser.Physics.Matter.Matter;\r\n    }\r\n    MatterGameObject.prototype.addBody = function (body) {\r\n        this.body = body;\r\n        this.body.prevVelocity = { x: 0, y: 0 };\r\n        this.scene.matter.world.add(this.body);\r\n    };\r\n    MatterGameObject.prototype.addBodies = function (bodies) {\r\n        this.body = this.Matter.Body.create({\r\n            parts: bodies.map(function (body) { return body; })\r\n        });\r\n        this.body.prevVelocity = { x: 0, y: 0 };\r\n        this.scene.matter.world.add(this.body);\r\n    };\r\n    MatterGameObject.prototype.preUpdate = function (arg) {\r\n        if (arg === void 0) { arg = undefined; }\r\n        this.angle = Phaser.Math.RadToDeg(this.body.angle);\r\n    };\r\n    MatterGameObject.prototype.update = function (arg) {\r\n        if (arg === void 0) { arg = undefined; }\r\n    };\r\n    MatterGameObject.prototype.postUpdate = function (arg) {\r\n        if (arg === void 0) { arg = undefined; }\r\n        if (this.dead && !this.prevDead)\r\n            this.prevDead = true;\r\n        else if (!this.dead && this.prevDead)\r\n            this.prevDead = false;\r\n        this.body.prevVelocity = __assign({}, this.body.velocity);\r\n        this.prevAngle = this.angle;\r\n        this.prevAnimation = this.animation;\r\n    };\r\n    MatterGameObject.prototype.revive = function (x, y, clientId, socketId) {\r\n        if (clientId === void 0) { clientId = undefined; }\r\n        if (socketId === void 0) { socketId = undefined; }\r\n        this.kill(false);\r\n        this.Matter.Body.setPosition(this.body, { x: x, y: y });\r\n    };\r\n    MatterGameObject.prototype.kill = function (dead) {\r\n        if (dead === void 0) { dead = true; }\r\n        this.dead = dead;\r\n        if (dead)\r\n            this.Matter.Body.setPosition(this.body, { x: -1000, y: -1000 });\r\n        this.Matter.Sleeping.set(this.body, dead);\r\n    };\r\n    return MatterGameObject;\r\n}());\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (MatterGameObject);\r\n\n\n//# sourceURL=webpack:///./src/server/game/matterObjects/matterGameObject.ts?");

/***/ }),

/***/ "./src/server/game/matterObjects/matterGameObjectGroup.ts":
/*!****************************************************************!*\
  !*** ./src/server/game/matterObjects/matterGameObjectGroup.ts ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dude__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dude */ \"./src/server/game/matterObjects/dude.ts\");\n/* harmony import */ var _box__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./box */ \"./src/server/game/matterObjects/box.ts\");\n/* harmony import */ var _star__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./star */ \"./src/server/game/matterObjects/star.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../constants */ \"./src/constants.ts\");\n\r\n\r\n\r\n\r\nvar GameObjectGroup = /** @class */ (function () {\r\n    function GameObjectGroup(scene, objects) {\r\n        this.scene = scene;\r\n        this.objects = objects;\r\n        this.Matter = Phaser.Physics.Matter.Matter;\r\n    }\r\n    GameObjectGroup.prototype.killById = function (id) {\r\n        this.objects.forEach(function (obj) {\r\n            if (obj.body.id === id)\r\n                obj.kill();\r\n        });\r\n    };\r\n    GameObjectGroup.prototype.getObjectById = function (id) {\r\n        var object = undefined;\r\n        this.objects.forEach(function (obj) {\r\n            if (obj.body.id === id)\r\n                object = obj;\r\n        });\r\n        return object;\r\n    };\r\n    GameObjectGroup.prototype.add = function (x, y, skin, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var dead = this.objects.filter(function (obj) { return obj.dead && obj.skin === skin; });\r\n        var alive = this.objects.filter(function (obj) { return !obj.dead && obj.skin === skin; });\r\n        var clientId = options.clientId, socketId = options.socketId, category = options.category;\r\n        // allow not more than 100 alive objects per skin\r\n        if (alive.length >= 100)\r\n            return;\r\n        var object = null;\r\n        if (dead.length > 0) {\r\n            // revive the first dead object and set its x and y\r\n            object = dead[0];\r\n            object.revive(x, y, clientId, socketId);\r\n        }\r\n        else {\r\n            // create a new object and add it to the objects array\r\n            if (skin === _constants__WEBPACK_IMPORTED_MODULE_3__[\"SKINS\"].BOX)\r\n                object = new _box__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.scene, x, y);\r\n            else if (skin === _constants__WEBPACK_IMPORTED_MODULE_3__[\"SKINS\"].STAR)\r\n                object = new _star__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.scene, x, y, category);\r\n            else if (typeof clientId !== 'undefined' && typeof socketId !== 'undefined')\r\n                object = new _dude__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.scene, x, y, clientId, socketId);\r\n            if (object)\r\n                this.objects.push(object);\r\n        }\r\n        // Rotate the box\r\n        // TODO(yandeu) this should be inside the boxObject class\r\n        if (skin === _constants__WEBPACK_IMPORTED_MODULE_3__[\"SKINS\"].BOX && object)\r\n            this.Matter.Body.rotate(object.body, Math.random() * 2);\r\n        return object;\r\n    };\r\n    return GameObjectGroup;\r\n}());\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (GameObjectGroup);\r\n\n\n//# sourceURL=webpack:///./src/server/game/matterObjects/matterGameObjectGroup.ts?");

/***/ }),

/***/ "./src/server/game/matterObjects/star.ts":
/*!***********************************************!*\
  !*** ./src/server/game/matterObjects/star.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _matterGameObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./matterGameObject */ \"./src/server/game/matterObjects/matterGameObject.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../constants */ \"./src/constants.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar Star = /** @class */ (function (_super) {\r\n    __extends(Star, _super);\r\n    function Star(scene, x, y, category) {\r\n        if (category === void 0) { category = undefined; }\r\n        var _this = _super.call(this, scene, _constants__WEBPACK_IMPORTED_MODULE_1__[\"SKINS\"].STAR) || this;\r\n        _this.scene = scene;\r\n        _this.x = x;\r\n        _this.y = y;\r\n        _this.category = category;\r\n        _this.scale = 1;\r\n        if (category === 'big') {\r\n            _this.tint = 0xff7200;\r\n            _this.scale = 3;\r\n        }\r\n        if (category === 'medium') {\r\n            _this.scale = 2;\r\n        }\r\n        _this.addBody(_this.Matter.Bodies.rectangle(x, y, 24 * _this.scale, 22 * _this.scale, {\r\n            chamfer: { radius: 14 },\r\n            label: 'star',\r\n            isStatic: true,\r\n            isSensor: true\r\n        }));\r\n        return _this;\r\n    }\r\n    Star.prototype.setReviveTimer = function () {\r\n        var _this = this;\r\n        this.scene.time.addEvent({\r\n            delay: 15000,\r\n            callback: function () {\r\n                _super.prototype.revive.call(_this, _this.x, _this.y);\r\n            }\r\n        });\r\n    };\r\n    Star.prototype.kill = function (dead) {\r\n        if (dead === void 0) { dead = true; }\r\n        this.dead = dead;\r\n        if (dead)\r\n            this.Matter.Body.setPosition(this.body, { x: -1000, y: -1000 });\r\n        this.Matter.Sleeping.set(this.body, dead);\r\n    };\r\n    return Star;\r\n}(_matterGameObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Star);\r\n\n\n//# sourceURL=webpack:///./src/server/game/matterObjects/star.ts?");

/***/ }),

/***/ "./src/server/game/scenes/arcadeScene.ts":
/*!***********************************************!*\
  !*** ./src/server/game/scenes/arcadeScene.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _client_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../client/config */ \"./src/client/config.ts\");\n/* harmony import */ var _arcadeObjects_box__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../arcadeObjects/box */ \"./src/server/game/arcadeObjects/box.ts\");\n/* harmony import */ var _arcadeObjects_dude__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../arcadeObjects/dude */ \"./src/server/game/arcadeObjects/dude.ts\");\n/* harmony import */ var _client_components_cursors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../client/components/cursors */ \"./src/client/components/cursors.ts\");\n/* harmony import */ var _arcadeObjects_star__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../arcadeObjects/star */ \"./src/server/game/arcadeObjects/star.ts\");\n/* harmony import */ var _arcadeObjects_mummy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../arcadeObjects/mummy */ \"./src/server/game/arcadeObjects/mummy.ts\");\n/* harmony import */ var _arcadeObjects_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../arcadeObjects/map */ \"./src/server/game/arcadeObjects/map.ts\");\n/* harmony import */ var _managers_syncManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../managers/syncManager */ \"./src/server/managers/syncManager.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../constants */ \"./src/constants.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar MainScene = /** @class */ (function (_super) {\r\n    __extends(MainScene, _super);\r\n    function MainScene() {\r\n        var _this = \r\n        // @ts-ignore\r\n        _super.call(this, { key: 'MainScene', plugins:  true ? null : undefined, active: false, cameras: null }) || this;\r\n        _this.id = 0;\r\n        _this.debug = {};\r\n        _this.level = 0;\r\n        _this.objectsToSync = {};\r\n        _this.tick = 0;\r\n        return _this;\r\n        // see all scene plugins:\r\n        // Phaser.Plugins.DefaultScene\r\n        // https://github.com/photonstorm/phaser/blob/master/src/plugins/DefaultPlugins.js#L76\r\n    }\r\n    /** Create a new object id */\r\n    MainScene.prototype.newId = function () {\r\n        return this.id++;\r\n    };\r\n    MainScene.prototype.init = function () {\r\n        try {\r\n            //@ts-ignore\r\n            var _a = this.game.config.preBoot(), _b = _a.level, level = _b === void 0 ? 0 : _b, roomId = _a.roomId, roomManager = _a.roomManager;\r\n            this.level = level;\r\n            this.roomManager = roomManager;\r\n            this.roomId = roomId;\r\n        }\r\n        catch (error) {\r\n            if (false)\r\n                {}\r\n        }\r\n    };\r\n    MainScene.prototype.create = function () {\r\n        var _this = this;\r\n        // this will stop the scene\r\n        this.events.addListener('stopScene', function () {\r\n            _this.roomManager.stats.removeTotalObjects(_this.roomId);\r\n            _this.scene.stop();\r\n            _this.roomManager.stats.log(\"Scene in roomId <b>\" + _this.roomId + \"</b> has stopped!\");\r\n        });\r\n        this.physics.world.setBounds(_client_config__WEBPACK_IMPORTED_MODULE_0__[\"world\"].x, _client_config__WEBPACK_IMPORTED_MODULE_0__[\"world\"].y, _client_config__WEBPACK_IMPORTED_MODULE_0__[\"world\"].width, _client_config__WEBPACK_IMPORTED_MODULE_0__[\"world\"].height);\r\n        this.dudeGroup = this.add.group();\r\n        this.boxGroup = this.add.group();\r\n        this.mummyGroup = this.add.group();\r\n        this.map = new _arcadeObjects_map__WEBPACK_IMPORTED_MODULE_6__[\"default\"](this, _client_config__WEBPACK_IMPORTED_MODULE_0__[\"world\"], this.level);\r\n        var level = this.map.getLevel();\r\n        // generate the level\r\n        level.forEach(function (row, y) {\r\n            for (var x = 0; x < row.length; x++) {\r\n                var xx = x * _this.map.tileSize + _this.map.margin.x;\r\n                var yy = y * _this.map.tileSize + _this.map.margin.y;\r\n                if (row[x] === 'X')\r\n                    _this.boxGroup.add(new _arcadeObjects_box__WEBPACK_IMPORTED_MODULE_1__[\"default\"](_this, _this.newId(), xx, yy));\r\n                if (row[x] === 'G')\r\n                    _this.star = new _arcadeObjects_star__WEBPACK_IMPORTED_MODULE_4__[\"default\"](_this, _this.newId(), xx, yy);\r\n                if (row[x] === 'M')\r\n                    _this.mummyGroup.add(new _arcadeObjects_mummy__WEBPACK_IMPORTED_MODULE_5__[\"default\"](_this, _this.newId(), xx, yy));\r\n            }\r\n        });\r\n        if (true) {\r\n            this.add\r\n                .text(24, 24, 'Physics Debugging Version\\nMove with Arrow Keys', {\r\n                fontSize: 36\r\n            })\r\n                .setScrollFactor(0)\r\n                .setOrigin(0)\r\n                .setAlpha(0.6);\r\n            // mock socket\r\n            this.debug.socket = { emit: function () { } };\r\n            this.debug.cursors = new _client_components_cursors__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this, this.debug.socket);\r\n            this.debug.dude = new _arcadeObjects_dude__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this, this.newId(), { clientId: 55555, socketId: 'some-socket-id' });\r\n            this.dudeGroup.add(this.debug.dude);\r\n            // this helps debugging\r\n            this.input.on('pointerdown', function (pointer) {\r\n                console.log(pointer.worldX, pointer.worldY);\r\n                console.log(_this.map.getTileByCoordinates({ x: pointer.worldX, y: pointer.worldY }));\r\n            });\r\n        }\r\n        this.events.addListener('createDude', function (clientId, socketId) {\r\n            var dude = _this.dudeGroup.getFirstDead();\r\n            if (dude) {\r\n                dude.revive(clientId, socketId);\r\n            }\r\n            else {\r\n                dude = new _arcadeObjects_dude__WEBPACK_IMPORTED_MODULE_2__[\"default\"](_this, _this.newId(), { clientId: clientId, socketId: socketId });\r\n                _this.dudeGroup.add(dude);\r\n            }\r\n        });\r\n        this.events.addListener('U' /* short for updateDude */, function (res) {\r\n            // @ts-ignore\r\n            var dudes = _this.dudeGroup.children.getArray().filter(function (dude) {\r\n                return dude.clientId && dude.clientId === res.clientId;\r\n            });\r\n            if (dudes[0]) {\r\n                var b = res.updates;\r\n                var updates = {\r\n                    left: b === 1 || b === 5 ? true : false,\r\n                    right: b === 2 || b === 6 ? true : false,\r\n                    up: b === 4 || b === 6 || b === 5 ? true : false,\r\n                    none: b === 8 ? true : false\r\n                };\r\n                dudes[0].setUpdates(updates);\r\n            }\r\n        });\r\n        this.events.addListener('removeDude', function (clientId) {\r\n            // @ts-ignore\r\n            _this.dudeGroup.children.iterate(function (dude) {\r\n                if (dude.clientId === clientId) {\r\n                    dude.kill();\r\n                }\r\n            });\r\n        });\r\n        this.physics.add.collider(this.dudeGroup, this.boxGroup);\r\n        this.physics.add.collider(this.mummyGroup, this.boxGroup);\r\n        // @ts-ignore\r\n        this.physics.add.overlap(this.mummyGroup, this.dudeGroup, function (mummy, dude) {\r\n            if (mummy.dead)\r\n                return;\r\n            if (mummy.body.touching.up && dude.body.touching.down) {\r\n                dude.setVelocityY(-300);\r\n                mummy.kill();\r\n            }\r\n            else {\r\n                dude.gotHit();\r\n            }\r\n        });\r\n        // @ts-ignore\r\n        this.physics.add.overlap(this.dudeGroup, this.star, function (dude, star) {\r\n            if (dude.dead)\r\n                return;\r\n            dude.kill();\r\n            var nextLevel = _this.level + 1 >= _this.map.countTotalLevels() ? 0 : _this.level + 1;\r\n            var socket = _this.roomManager.ioNspGame.sockets[dude.socketId];\r\n            _this.roomManager.changeRoom(socket, 'ArcadeScene', nextLevel);\r\n        });\r\n    };\r\n    /** Sends the initial state to the client */\r\n    MainScene.prototype.getInitialState = function () {\r\n        var objects = [];\r\n        _managers_syncManager__WEBPACK_IMPORTED_MODULE_7__[\"default\"].prepareFromPhaserGroup(this.boxGroup, objects);\r\n        _managers_syncManager__WEBPACK_IMPORTED_MODULE_7__[\"default\"].prepareFromPhaserGroup(this.dudeGroup, objects);\r\n        _managers_syncManager__WEBPACK_IMPORTED_MODULE_7__[\"default\"].prepareFromPhaserSprite(this.star, objects);\r\n        return _managers_syncManager__WEBPACK_IMPORTED_MODULE_7__[\"default\"].encode(objects);\r\n    };\r\n    MainScene.prototype.update = function () {\r\n        var _this = this;\r\n        this.tick++;\r\n        if (this.tick > 1000000)\r\n            this.tick = 0;\r\n        // @ts-ignore\r\n        this.mummyGroup.children.iterate(function (mummy) {\r\n            var coordinates = mummy.getLookAhead();\r\n            var tile = _this.map.getTileByCoordinates(coordinates);\r\n            mummy.changeDirection(tile);\r\n            mummy.update();\r\n        });\r\n        if (true) {\r\n            this.debug.cursors.update();\r\n            var cursorsDown = this.debug.cursors.cursorsDown();\r\n            var dude = this.debug.dude;\r\n            dude.setUpdates(cursorsDown);\r\n            dude.update();\r\n            this.cameras.main.setScroll(dude.body.position.x - this.cameras.main.width / 2, dude.body.position.y - this.cameras.main.height * 0.8);\r\n        }\r\n        if (true)\r\n            return;\r\n        var prepareObjectToSync = function (obj) {\r\n            var cleanObjectToSync = _managers_syncManager__WEBPACK_IMPORTED_MODULE_7__[\"default\"].cleanObjectToSync(obj);\r\n            _this.objectsToSync = _managers_syncManager__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mergeObjectToSync(cleanObjectToSync, _this.objectsToSync);\r\n        };\r\n        if (this.star && this.star.sync) {\r\n            var starObj = {\r\n                skin: this.star.skin,\r\n                tint: this.star.tint,\r\n                id: this.star.id,\r\n                x: this.star.body.position.x + this.star.body.width / 2,\r\n                y: this.star.body.position.y + this.star.body.height / 2\r\n            };\r\n            prepareObjectToSync(starObj);\r\n            this.star.sync = false;\r\n        }\r\n        // @ts-ignore\r\n        this.mummyGroup.children.iterate(function (child) {\r\n            var object = {\r\n                skin: child.skin,\r\n                direction: child.direction,\r\n                id: child.id,\r\n                x: child.body.position.x + child.body.width / 2,\r\n                y: child.body.position.y + child.body.height / 2\r\n            };\r\n            prepareObjectToSync(object);\r\n        });\r\n        // @ts-ignore\r\n        this.boxGroup.children.iterate(function (child) {\r\n            if (child.sync) {\r\n                var object = {\r\n                    skin: child.skin,\r\n                    id: child.id,\r\n                    x: child.body.position.x + child.body.width / 2,\r\n                    y: child.body.position.y + child.body.height / 2\r\n                };\r\n                prepareObjectToSync(object);\r\n            }\r\n            child.sync = false;\r\n        });\r\n        // @ts-ignore\r\n        this.dudeGroup.children.iterate(function (child) {\r\n            child.update();\r\n            // we only update the dude if one if the 4 properties below have changed\r\n            var x = child.prevPosition.x.toFixed(0) !== child.body.position.x.toFixed(0);\r\n            var y = child.prevPosition.y.toFixed(0) !== child.body.position.y.toFixed(0);\r\n            var dead = child.prevDead !== child.dead;\r\n            var color = child.prevColor.toString() !== child.color.toString();\r\n            if (x || y || dead || color) {\r\n                var object = {\r\n                    animation: child.animation,\r\n                    dead: child.dead,\r\n                    clientId: child.clientId,\r\n                    skin: child.skin,\r\n                    tint: child.color,\r\n                    id: child.id,\r\n                    x: child.body.position.x + child.body.width / 2,\r\n                    y: child.body.position.y + child.body.height / 2\r\n                };\r\n                prepareObjectToSync(object);\r\n            }\r\n            child.postUpdate();\r\n        });\r\n        var send = [];\r\n        Object.keys(this.objectsToSync).forEach(function (key) {\r\n            // we only sync the mummies on every 3th frame\r\n            if (_this.objectsToSync[key].skin === _constants__WEBPACK_IMPORTED_MODULE_8__[\"SKINS\"].MUMMY) {\r\n                if (_this.tick % 3 === 0) {\r\n                    send.push(_this.objectsToSync[key]);\r\n                    delete _this.objectsToSync[key];\r\n                }\r\n            }\r\n            else {\r\n                send.push(_this.objectsToSync[key]);\r\n                delete _this.objectsToSync[key];\r\n            }\r\n        });\r\n        if (send.length > 0) {\r\n            // send the objects to sync to all connected clients in this.roomId\r\n            this.roomManager.ioNspGame\r\n                .in(this.roomId)\r\n                .emit('S' /* short for syncGame */, { O /* short for objects */: _managers_syncManager__WEBPACK_IMPORTED_MODULE_7__[\"default\"].encode(send) });\r\n        }\r\n    };\r\n    return MainScene;\r\n}(Phaser.Scene));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (MainScene);\r\n\n\n//# sourceURL=webpack:///./src/server/game/scenes/arcadeScene.ts?");

/***/ }),

/***/ "./src/server/game/scenes/matterScene.ts":
/*!***********************************************!*\
  !*** ./src/server/game/scenes/matterScene.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _matterObjects_matterGameObjectGroup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../matterObjects/matterGameObjectGroup */ \"./src/server/game/matterObjects/matterGameObjectGroup.ts\");\n/* harmony import */ var _client_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../client/config */ \"./src/client/config.ts\");\n/* harmony import */ var _client_components_cursors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../client/components/cursors */ \"./src/client/components/cursors.ts\");\n/* harmony import */ var _managers_syncManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../managers/syncManager */ \"./src/server/managers/syncManager.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../constants */ \"./src/constants.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n// PHYSICS_DEBUG\r\n\r\n\r\n\r\nvar MainScene = /** @class */ (function (_super) {\r\n    __extends(MainScene, _super);\r\n    function MainScene() {\r\n        var _this = _super.call(this, { key: 'MainScene', plugins:  true ? null : undefined }) || this;\r\n        _this.objects = [];\r\n        _this.objectsToSync = {};\r\n        _this.debug = {};\r\n        _this.tick = 0;\r\n        return _this;\r\n        // see all scene plugins:\r\n        // Phaser.Plugins.DefaultScene\r\n        // https://github.com/photonstorm/phaser/blob/master/src/plugins/DefaultPlugins.js#L76\r\n    }\r\n    MainScene.prototype.init = function () {\r\n        try {\r\n            //@ts-ignore\r\n            var _a = this.game.config.preBoot(), _b = _a.level, level = _b === void 0 ? 0 : _b, roomId = _a.roomId, roomManager = _a.roomManager;\r\n            this.level = level;\r\n            this.roomManager = roomManager;\r\n            this.roomId = roomId;\r\n        }\r\n        catch (error) {\r\n            if (false)\r\n                {}\r\n        }\r\n    };\r\n    MainScene.prototype.create = function () {\r\n        var _this = this;\r\n        var Matter = Phaser.Physics.Matter.Matter;\r\n        var worldCenterX = (_client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].x + _client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].width) / 2;\r\n        // add and modify the world bounds\r\n        var bounds = this.matter.world.setBounds(_client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].x, _client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].y, _client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].width, _client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].height);\r\n        Object.keys(bounds.walls).forEach(function (key) {\r\n            var body = bounds.walls[key];\r\n            Matter.Body.set(body, { friction: 0.05, frictionStatic: 0.05, frictionAir: 0.01 });\r\n            // we do not need the top, so we set it to isSensor\r\n            if (key === 'top')\r\n                Matter.Body.set(body, { isSensor: true });\r\n        });\r\n        // instantiate the GameObjectGroup\r\n        var gameObjectGroup = new _matterObjects_matterGameObjectGroup__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this, this.objects);\r\n        // this will stop the scene\r\n        this.events.addListener('stopScene', function () {\r\n            _this.objects.forEach(function (obj) {\r\n                _this.matter.world.remove(_this.matter.world, obj.body);\r\n            });\r\n            _this.roomManager.stats.removeTotalObjects(_this.roomId);\r\n            _this.scene.stop();\r\n            _this.roomManager.stats.log(\"Scene in roomId <b>\" + _this.roomId + \"</b> has stopped!\");\r\n        });\r\n        // creates a new dude, when a new user connects\r\n        this.events.addListener('createDude', function (clientId, socketId) {\r\n            var leftX = Phaser.Math.RND.integerInRange(_client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].x + 100, _this.cameras.main.width / 2 - 640);\r\n            var rightX = Phaser.Math.RND.integerInRange(_this.cameras.main.width / 2 + 640, _client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].x + _client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].width - 100);\r\n            var x = Math.random() > 0.5 ? leftX : rightX;\r\n            var y = -50;\r\n            gameObjectGroup.add(x, y, _constants__WEBPACK_IMPORTED_MODULE_4__[\"SKINS\"].DUDE, { clientId: clientId, socketId: socketId });\r\n        });\r\n        // updates the position of a dude\r\n        this.events.addListener('U' /* short for updateDude */, function (res) {\r\n            var dudes = _this.objects.filter(function (obj) { return obj.clientId && obj.clientId === res.clientId; });\r\n            if (dudes[0]) {\r\n                var b = res.updates;\r\n                var updates = {\r\n                    left: b === 1 || b === 5 ? true : false,\r\n                    right: b === 2 || b === 6 ? true : false,\r\n                    up: b === 4 || b === 6 || b === 5 ? true : false,\r\n                    none: b === 8 ? true : false\r\n                };\r\n                dudes[0].setUpdates(updates);\r\n            }\r\n        });\r\n        // removes a dude\r\n        this.events.addListener('removeDude', function (clientId) {\r\n            var dudes = _this.objects.filter(function (obj) { return obj.clientId && obj.clientId === clientId; });\r\n            dudes.forEach(function (dude) { return dude.kill(); });\r\n        });\r\n        // adds another box every 1.2 seconds\r\n        this.time.addEvent({\r\n            delay: 1200,\r\n            loop: true,\r\n            callback: function () {\r\n                var x = Phaser.Math.RND.integerInRange(worldCenterX - 250 - 640, worldCenterX + 640 + 250);\r\n                var y = 100;\r\n                gameObjectGroup.add(x, y, _constants__WEBPACK_IMPORTED_MODULE_4__[\"SKINS\"].BOX);\r\n            }\r\n        });\r\n        if (true) {\r\n            this.add\r\n                .text(24, 24, 'Physics Debugging Version\\nMove with Arrow Keys', {\r\n                fontSize: 36\r\n            })\r\n                .setScrollFactor(0)\r\n                .setOrigin(0)\r\n                .setAlpha(0.6);\r\n            this.debug.socket = { emit: function () { } }; // mock socket\r\n            this.debug.cursors = new _client_components_cursors__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this, this.debug.socket);\r\n            this.debug.dude = gameObjectGroup.add(400, 400, _constants__WEBPACK_IMPORTED_MODULE_4__[\"SKINS\"].DUDE, { clientId: 55555, socketId: 'some-socket-id' });\r\n        }\r\n        if (false) {}\r\n        // add the big star\r\n        gameObjectGroup.add(worldCenterX, _client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].height - 320 - 100 - 115, _constants__WEBPACK_IMPORTED_MODULE_4__[\"SKINS\"].STAR, {\r\n            category: 'big'\r\n        });\r\n        // add medium stars\r\n        for (var x = worldCenterX - 128; x < worldCenterX + 128 + 64; x += 128)\r\n            gameObjectGroup.add(x, _client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].height - 320 - 100, _constants__WEBPACK_IMPORTED_MODULE_4__[\"SKINS\"].STAR, { category: 'medium' });\r\n        // add yellow stars\r\n        for (var x = worldCenterX - 160 - 80; x < worldCenterX + 320 + 80; x += 160)\r\n            gameObjectGroup.add(x, _client_config__WEBPACK_IMPORTED_MODULE_1__[\"world\"].height - 320, _constants__WEBPACK_IMPORTED_MODULE_4__[\"SKINS\"].STAR);\r\n        // create 4 boxes at server start\r\n        gameObjectGroup.add(1280, 640, _constants__WEBPACK_IMPORTED_MODULE_4__[\"SKINS\"].BOX);\r\n        gameObjectGroup.add(1280, 640, _constants__WEBPACK_IMPORTED_MODULE_4__[\"SKINS\"].BOX);\r\n        gameObjectGroup.add(1280, 640, _constants__WEBPACK_IMPORTED_MODULE_4__[\"SKINS\"].BOX);\r\n        gameObjectGroup.add(1280, 640, _constants__WEBPACK_IMPORTED_MODULE_4__[\"SKINS\"].BOX);\r\n        // check for collisions\r\n        var collisionEvent = function (event) {\r\n            event.pairs.forEach(function (pair) {\r\n                var bodyA = pair.bodyA, bodyB = pair.bodyB;\r\n                var labels = [bodyA.label, bodyB.label];\r\n                // Dude hits star\r\n                if (labels.includes('dude') && labels.includes('star')) {\r\n                    var starBody = bodyA.label === 'star' ? bodyA : bodyB;\r\n                    var star = gameObjectGroup.getObjectById(starBody.id);\r\n                    if (star) {\r\n                        star.kill();\r\n                        star.setReviveTimer();\r\n                    }\r\n                }\r\n                // Dude's sensor hits another body\r\n                if (/Sensor/.test(bodyA.label) || /Sensor/.test(bodyB.label)) {\r\n                    var sensorBody = /Sensor/.test(bodyA.label) ? bodyA : bodyB;\r\n                    var otherBody = /Sensor/.test(bodyA.label) ? bodyB : bodyA;\r\n                    if (otherBody.isSensor)\r\n                        return;\r\n                    var dude = gameObjectGroup.getObjectById(sensorBody.parent.id);\r\n                    if (dude) {\r\n                        var sepPadding = 2;\r\n                        if (otherBody.isStatic) {\r\n                            sepPadding = 0.1;\r\n                        }\r\n                        var sep = pair.separation - sepPadding;\r\n                        if (sensorBody === dude.sensors.left) {\r\n                            dude.move.leftAllowed = !otherBody.isStatic;\r\n                            dude.touching.left = true;\r\n                            if (pair.separation > sepPadding) {\r\n                                dude.setTranslate(sep);\r\n                                dude.translate();\r\n                            }\r\n                        }\r\n                        else if (sensorBody === dude.sensors.right) {\r\n                            dude.move.rightAllowed = !otherBody.isStatic;\r\n                            dude.touching.right = true;\r\n                            if (pair.separation > sepPadding) {\r\n                                dude.setTranslate(-sep);\r\n                                dude.translate();\r\n                            }\r\n                        }\r\n                        else if (sensorBody === dude.sensors.bottom) {\r\n                            dude.touching.bottom = true;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        // https://itnext.io/modular-game-worlds-in-phaser-3-tilemaps-5-matter-physics-platformer-d14d1f614557\r\n        this.matter.world.on('collisionstart', collisionEvent);\r\n        this.matter.world.on('collisionactive', collisionEvent);\r\n    };\r\n    /** Sends the initial state to the client */\r\n    MainScene.prototype.getInitialState = function () {\r\n        var objects = [];\r\n        _managers_syncManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].prepareFromMatterGameObject(this.objects, objects);\r\n        return _managers_syncManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].encode(objects);\r\n    };\r\n    MainScene.prototype.update = function (time, delta) {\r\n        var _this = this;\r\n        this.tick++;\r\n        if (this.tick > 1000000)\r\n            this.tick = 0;\r\n        if (true) {\r\n            this.debug.cursors.update();\r\n            var cursorsDown = this.debug.cursors.cursorsDown();\r\n            var dude = this.debug.dude;\r\n            dude.setUpdates(cursorsDown);\r\n            dude.update();\r\n            this.cameras.main.setScroll(dude.body.position.x - this.cameras.main.width / 2, dude.body.position.y - this.cameras.main.height * 0.8);\r\n        }\r\n        if (false) { var send_1; }\r\n    };\r\n    return MainScene;\r\n}(Phaser.Scene));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (MainScene);\r\n\n\n//# sourceURL=webpack:///./src/server/game/scenes/matterScene.ts?");

/***/ }),

/***/ "./src/server/managers/syncManager.ts":
/*!********************************************!*\
  !*** ./src/server/managers/syncManager.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar __assign = (undefined && undefined.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n/** Helps preparing the object to sync with the client */\r\nvar SyncManager = /** @class */ (function () {\r\n    function SyncManager() {\r\n    }\r\n    SyncManager.prepareFromPhaserGroup = function (group, objects) {\r\n        group.children.iterate(function (sprite) {\r\n            SyncManager.prepareFromPhaserSprite(sprite, objects);\r\n        });\r\n    };\r\n    SyncManager.prepareFromPhaserSprite = function (sprite, objects) {\r\n        var obj = __assign(__assign({}, sprite), this.getXY(sprite));\r\n        objects.push(SyncManager.cleanObjectToSync(obj));\r\n    };\r\n    SyncManager.prepareFromMatterGameObject = function (gameObjects, objects) {\r\n        gameObjects.forEach(function (obj) {\r\n            objects.push(SyncManager.cleanObjectToSync(obj));\r\n        });\r\n    };\r\n    SyncManager.getXY = function (child) {\r\n        return { x: child.body.position.x + child.body.width / 2, y: child.body.position.y + child.body.height / 2 };\r\n    };\r\n    SyncManager.mergeObjectToSync = function (obj, mergeTo) {\r\n        var _a;\r\n        var merged = false;\r\n        Object.keys(mergeTo).forEach(function (o) {\r\n            if (o === obj.id) {\r\n                mergeTo[obj.id] = __assign(__assign({}, mergeTo[obj.id]), obj);\r\n                merged = true;\r\n            }\r\n        });\r\n        if (!merged)\r\n            mergeTo = __assign(__assign({}, mergeTo), (_a = {}, _a[obj.id] = obj, _a));\r\n        return mergeTo;\r\n    };\r\n    SyncManager.cleanObjectToSync = function (obj) {\r\n        var addToObjectToSync = function (key, prop) {\r\n            var _a;\r\n            if (prop !== null)\r\n                objectToSync = __assign(__assign({}, objectToSync), (_a = {}, _a[key] = prop, _a));\r\n        };\r\n        var objectToSync = {};\r\n        addToObjectToSync('id', obj.id || obj.body.id);\r\n        addToObjectToSync('x', obj.x || obj.body.position.x || null);\r\n        addToObjectToSync('y', obj.y || obj.body.position.y || null);\r\n        addToObjectToSync('angle', obj.angle !== 'undefined' ? obj.angle : null);\r\n        addToObjectToSync('dead', obj.dead !== 'undefined' ? obj.dead : null);\r\n        addToObjectToSync('skin', obj.skin !== 'undefined' ? obj.skin : null);\r\n        addToObjectToSync('animation', obj.animation || null);\r\n        addToObjectToSync('direction', obj.direction || null);\r\n        addToObjectToSync('scale', obj.scale && obj.scale !== 1 ? obj.scale : null);\r\n        addToObjectToSync('tint', obj.tint ? obj.tint : null);\r\n        addToObjectToSync('clientId', obj.clientId || null);\r\n        addToObjectToSync('category', obj.category || null);\r\n        // Object.keys(objectToSync).forEach(key => objectToSync[key] == null && delete objectToSync[key])\r\n        return objectToSync;\r\n    };\r\n    Object.defineProperty(SyncManager, \"keys\", {\r\n        get: function () {\r\n            // sort these based on most used\r\n            return ['id', 'x', 'y', 'angle', 'dead', 'skin', 'animation', 'direction', 'scale', 'tint', 'clientId', 'category'];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    SyncManager.decode = function (data) {\r\n        var keys = SyncManager.keys;\r\n        var decodedArray = [];\r\n        var obj = {};\r\n        data.split(',').forEach(function (value, index) {\r\n            var key = keys[index % keys.length];\r\n            // id (radix 36)\r\n            if (key === 'id') {\r\n                obj[key] = parseInt(value, 36).toString();\r\n            }\r\n            // numbers\r\n            else if (['skin', 'scale'].includes(key)) {\r\n                obj[key] = value !== '' ? parseInt(value) : null;\r\n            }\r\n            // numbers (radix 36)\r\n            else if (['x', 'y', 'angle', 'clientId'].includes(key)) {\r\n                obj[key] = value !== '' ? parseInt(value, 36) : null;\r\n            }\r\n            // booleans\r\n            else if (['dead'].includes(key)) {\r\n                obj[key] = value === '0' ? false : value === '1' ? true : null;\r\n            }\r\n            // strings\r\n            else\r\n                obj[key] = value !== '' ? value : null;\r\n            if (index % keys.length === keys.length - 1) {\r\n                decodedArray.push(__assign({}, obj));\r\n                obj = {};\r\n            }\r\n        });\r\n        return decodedArray;\r\n    };\r\n    SyncManager.encode = function (objs) {\r\n        var keys = SyncManager.keys;\r\n        var encodedString = '';\r\n        objs.forEach(function (obj) {\r\n            keys.forEach(function (key) {\r\n                if (typeof obj[key] !== 'undefined') {\r\n                    var value = obj[key];\r\n                    // booleans\r\n                    if (typeof obj[key] === 'boolean')\r\n                        value = obj[key] === false ? 0 : 1;\r\n                    // some numbers to radix 36\r\n                    else if (['id', 'x', 'y', 'angle', 'clientId'].includes(key)) {\r\n                        value = +value;\r\n                        value = +value.toFixed(0);\r\n                        value = value.toString(36);\r\n                    }\r\n                    encodedString += value + \",\";\r\n                }\r\n                else\r\n                    encodedString += ',';\r\n            });\r\n        });\r\n        return encodedString.slice(0, -1);\r\n    };\r\n    return SyncManager;\r\n}());\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (SyncManager);\r\n\n\n//# sourceURL=webpack:///./src/server/managers/syncManager.ts?");

/***/ }),

/***/ 0:
/*!************************************!*\
  !*** multi ./src/physics/index.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! ./src/physics/index.ts */\"./src/physics/index.ts\");\n\n\n//# sourceURL=webpack:///multi_./src/physics/index.ts?");

/***/ }),

/***/ 1:
/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack:///ws_(ignored)?");

/***/ })

/******/ });